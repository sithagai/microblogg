//     argument-parser
//     (c) simonfan
//     argument-parser is licensed under the MIT terms.

define("__argument-parser/types",["require","exports","module","lodash"],function(e,t,r){var n=e("lodash"),s={arguments:n.isArguments,array:n.isArray,"boolean":n.isBoolean,bool:n.isBoolean,date:n.isDate,element:n.isElement,empty:n.isEmpty,finite:n.isFinite,"function":n.isFunction,nan:n.isNaN,"null":n.isNull,number:n.isNumber,object:n.isObject,plainobject:n.isPlainObject,regexp:n.isRegExp,string:n.isString,undefined:n.isUndefined,"*":function(){return!0}},i=/^!/;r.exports=function(e,t){return i.test(t)?(t=t.replace(i,""),!s[t](e)):s[t](e)}}),define("__argument-parser/format",["require","exports","module","lodash","./types"],function(e,t){function r(e,t){var r={};return t?(r.types=e,(n.isNumber(t)||n.isString(t))&&(r.length=t)):n.isArray(e)?r.types=e:r.length=e,r}var n=e("lodash"),s=e("./types"),i={">":function(e,t){return e>t},">=":function(e,t){return e>=t},"<":function(e,t){return t>e},"<=":function(e,t){return t>=e}};t.format=function(e,t,n){var s=r(e,t);return 2===arguments.length?(this._formats.push(s),this._interfaces.push(t)):3===arguments.length&&(this._formats.push(s),this._interfaces.push(n)),this},t.acceptsFormat=function(e,t){var s=n.isPlainObject(e)?e:r(e,t);return s.length?this.acceptsLength(s.length)&&this.acceptsTypes(s.types):this.acceptsTypes(s.types)},t.acceptsTypes=function(e){return n.every(e,n.bind(function(e,t){return e=e.split("|"),n.any(e,n.partial(s,this.arguments[t]))},this))},t.acceptsLength=function(e){if(n.isNumber(e))return this.arguments.length===e;if(n.isString(e)){var t=e.match(/^(>=|>|<=|<)/)[0];return e=parseInt(e.replace(t,"")),i[t](this.arguments.length,e)}},t.interface=t.format,t.acceptsInterface=t.acceptsFormat}),define("__argument-parser/evaluate",["require","exports","module","lodash","./types"],function(e,t){var r=e("lodash"),n=e("./types");t.findInterface=function(){var e=r.findIndex(this._formats,r.bind(this.acceptsFormat,this));return r.isNumber(e)||this.error("No interface was found"),this._interfaces[e]},t.evaluate=function(){var e=this.findInterface(),t=r.isArray(e)?r.zipObject(e,this.args):e.apply(this,this.args);return this._defaults&&r.defaults(t,this._defaults),r.size(this._required)>0&&r.each(this._required,function(e,r){if(!n(t[r],e))throw new Error(r+" is required.")}),t}}),define("argument-parser",["require","exports","module","lodash","subject","./__argument-parser/format","./__argument-parser/evaluate"],function(e){var t=e("lodash"),r=e("subject"),n=r(function(e){this.arguments=e,this.args=Array.prototype.slice.call(e),this._formats=[],this._interfaces=[],this.name="",this._required={},this._defaults={}});return n.proto(e("./__argument-parser/format")),n.proto(e("./__argument-parser/evaluate")),n.proto({require:function(e){var r={};return t.isArray(e)?t.each(e,function(e){r[e]="!undefined"}):r=e,t.extend(this._required,r),this},defaults:function(e){return t.extend(this._defaults,e),this},error:function(e){throw new Error("Interface - "+this.name+" "+e)}}),n});